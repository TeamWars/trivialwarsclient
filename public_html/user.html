<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="icon" type="image/png" href="resources/images/favicon.ico" />
        <link rel="stylesheet" href="resources/css/player/player.css" />
        <script src="resources/js/jqueryui/jquery-1.10.2.js"></script>
        <script src="resources/js/jqueryui/jquery-ui-1.10.4.custom.js"></script>
        <link href="resources/css/dialog/jquery-ui-1.10.4.custom.css" rel="stylesheet">
        <title>Trivial Wars</title>
        <script type="text/javascript">
            $(document).ready(function() {
                $.ajax({
                    url: 'http://localhost/TrivialWarsServer/web/app_dev.php/trivial/user/auth',
                    method: 'POST',
                    dataType: 'json',
                    success: function(data) {
                        if (data.autenticado) {
                            $(".textoUsuario").text("!!Bienvenido " + data.usuario + "¡¡")
                        } else {
                            window.location = "/TrivialWarsClient/public_html/index.html";
                        }
                    },
                    error: function(error) {
                        alert("error");
                        window.location = "/TrivialWarsClient/public_html/index.html";
                    }
                });


                $("#dialogAbout").dialog({
                    autoOpen: false,
                    width: 900,
                    buttons: [{
                            text: "ok",
                            click: function() {
                                $(this).dialog("close");
                            }
                        }]
                });
                $("#dialogConfig").dialog({
                    autoOpen: false,
                    width: 900,
                    buttons: [{
                            text: "ok",
                            click: function() {
                                $(this).dialog("close");
                            }
                        }]
                });

                $("#dialogGame").dialog({
                    autoOpen: false,
                    width: 700,
                    buttons: [{
                            text: "unirse",
                            click: function() {
                                $(this).dialog("close");
                            }
                        }]
                });
                // Link to open the dialog
                $("#aboutButton").click(function(event) {
                    $("#dialogAbout").dialog("open");
                });
                $("#configButton").click(function(event) {
                    $("#dialogConfig").dialog("open");
                });
                $("#joinGame").click(function(event) {
                    $("#dialogGame").dialog("open");
                });

                // Hover states on the static widgets
                $("#dialog-link, #icons li").hover(
                        function() {
                            $(this).addClass("ui-state-hover");
                        },
                        function() {
                            $(this).removeClass("ui-state-hover");
                        }
                );

                $('#cssmenu ul ul li:odd').addClass('odd');
                $('#cssmenu ul ul li:even').addClass('even');
                $('#cssmenu > ul > li > a').click(function() {
                    $('#cssmenu li').removeClass('active');
                    $(this).closest('li').addClass('active');
                    var checkElement = $(this).next();
                    if ((checkElement.is('ul')) && (checkElement.is(':visible'))) {
                        $(this).closest('li').removeClass('active');
                        checkElement.slideUp('normal');
                    }
                    if ((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
                        $('#cssmenu ul ul:visible').slideUp('normal');
                        checkElement.slideDown('normal');
                    }
                    if ($(this).closest('li').find('ul').children().length == 0) {
                        return true;
                    } else {
                        return false;
                    }
                });
            });

            function comprobarPartida() {
                $("#chips").css("display","block");
            }
        </script>
    </head>
    <body onload="comprobarUsuario()">
        <div id="cabecera">
            <div id="logo">
                <p id="titulo">trivial wars</p>
            </div>
            <div id="userSession" align="right">
                <p class="textoUsuario"></p>
                <input id="closeSessionButton" value="cerrar sesion" onmouseover="document.getElementById('sablelaser').play()"/>
            </div>
        </div>

        <div id="cuerpo" align="center">
            <div id="trailer" align="center">
                <video width="720" height="440" autoplay muted loop>
                    <source src="resources/video/Recorte4-StarWarsVI.mp4" type="video/mp4">
                </video>
            </div>

            <div id="menu">
                <div>
                    <a href="game.html"><button class="botonMenu" onmouseover="document.getElementById('sablelaser').play()">crear partida</button></a>
                    <button id="joinGame" class="botonMenu" onmouseover="document.getElementById('sablelaser').play()">unirse a partida</button>
                </div><br>
                <div>
                    <button id="configButton" class="botonMenu" onmouseover="document.getElementById('sablelaser').play()">configuracion del juego</button>
                    <button id="aboutButton" class="botonMenu" onmouseover="document.getElementById('sablelaser').play()">sobre nosotros</button>
                </div>
            </div>

            <div id="dialogAbout" title="Sobre Nosotros">
                <div id="about" align="center">
                    <h4 id="titleAbout">Acerca de</h4>
                    <div id="info">
                        <img id="image" src="resources/images/ewok.jpg"/>
                        <div id="text">
                            <h3>Simulacion del juego de la oca y el trivial<br/>
                                con tematica star wars<br/>
                                realizado por:<br/>
                                todos los derechos reservados<br/>
                                version 1.0<br/>
                                Este producto se considera software<br/>
                                libre para el uso de cualquier usuario<br/>
                                Copyright 2014 TEAM WARS Corporation</h3>
                        </div>
                    </div>
                </div>
            </div>

            <div id="dialogConfig" title="Configuracion">
                <div id="config" align="center">
                    <h4 id="titleConfig">Configuracion</h4>
                    <div id="menuConfig">
                        <table>
                            <tr>
                                <td>
                                    <input type="checkbox" name="checkboxG1" id="checkboxG1" class="css-checkbox"/>
                                    <label for="checkboxG1" class="css-label">Musica</label>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" name="checkboxG2" id="checkboxG2" class="css-checkbox" checked="checked"/>
                                    <label for="checkboxG2" class="css-label">Sonidos</label>
                                </td>
                            </tr>
                        </table>
                        <div id='cssmenu'>
                            <ul>
                                <li class='has-sub'><a><span>Selecciona un idioma</span></a>
                                    <ul>
                                        <li><a href='#'><span>español</span></a></li>
                                        <li><a href='#'><span>inglés</span></a></li>
                                        <li class='last'><a href='#'><span>francés</span></a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div id="dialogGame" title="unirse a partida">
                <div id="nameGame">
                    nombre partida:<br/>
                    <input type = 'text' id="idGame" name = 'idGame' title="Se necesita un nombre de partida" required/>    
                    <button id="check" onclick="comprobarPartida();">comprobar</button>
                </div>
                <div id="chips">
                    <table>
                        <tr>
                            <td colspan="4">elegir ficha:</td>
                        </tr>
                        <tr>
                            <td class="chipsImages" id="1"><a href="#" class="Ntooltip"><img src="resources/images/c3po.jpg"/><span>C3PO</span></a></td>
                            <td class="chipsImages" id="2"><a href="#" class="Ntooltip"><img src="resources/images/darthvader.jpg"/><span>Darth Vader</span></a></td>
                            <td class="chipsImages" id="3"><a href="#" class="Ntooltip"><img src="resources/images/darthsidious.jpg"/><span>Darth Sidious</span></a></td>
                            <td class="chipsImages" id="4"><a href="#" class="Ntooltip"><img src="resources/images/hansolo.jpg"/><span>Han Solo</span></a></td>
                        </tr>
                        <tr>
                            <td class="chipsImages" id="5"><a href="#" class="Ntooltip"><img src="resources/images/leia.jpg"/><span>Leia</span></a></td>
                            <td class="chipsImages" id="6"><a href="#" class="Ntooltip"><img src="resources/images/luke.jpg"/><span>Luke</span></a></td>
                            <td class="chipsImages" id="7"><a href="#" class="Ntooltip"><img src="resources/images/obiwan.jpg"/><span>Obi-Wan</span></a></td>
                            <td class="chipsImages" id="8"><a href="#" class="Ntooltip"><img src="resources/images/r2d2.jpg"/><span>R2D2</span></a></td>
                        </tr>
                    </table>
                </div>
            </div>

        </div>
        <hr width="100%"/>

        <div id="pie"> 
            <audio id="sablelaser" src="resources/audio/saber1.wav"></audio>
            <audio src="resources/audio/mainTheme.wav" controls="controls" autoplay></audio>
        </div>

    </body>
</html>
